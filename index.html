<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  
</head>

<style>
  .line {
    /* border: 1px solid black; */
    display: flex;
    width: 230px;
    height: 230px;
    /* background-color: lightblue; */
    margin:5px;
  }

  .tovar {
    /* border: 1px solid black; */
    width: 150px;
    height: 150px;
    /* background-color: lightsalmon; */
    margin:15px;
    text-align: center;
  }

  .name {
    color:red;
  }

  .img {
    width: 130px;
    height: 130px;
  }

  
</style>

<body>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

<div>
  <button onclick="showvegetable()">овощ</button>
  <button onclick="showfruits()">фрукт</button>

</div>

<div class="line">
  
  <div class="tovar">
    <div><img id="img0" class="img" src=''></img></div>
    <div id="name0"></div>
    <div id="price0"></div>
  </div>
  
  <div class="tovar">
    <div><img id="img1" class="img" src=''></img></div>
    <div id="name1"></div>
    <div id="price1"></div>
  </div>

</div> 

<div class="line">
  
  <div class="tovar">
    <div><img id="img2" class="img" src=''></img></div>
    <div id="name2"></div>
    <div id="price2"></div>
  </div>
  
  <div class="tovar">
    <div><img id="img3" class="img" src=''></img></div>
    <div id="name3"></div>
    <div id="price3"></div>
  </div>

</div> 

<div class="line">
  
  <div class="tovar">
    <div><img id="img4" class="img" src=''></img></div>
    <div id="name4"></div>
    <div id="price4"></div>
  </div>
  
  <div class="tovar">
    <div><img id="img5" class="img" src=''></img></div>
    <div id="name5"></div>
    <div id="price5"></div>
  </div>

</div> 



</body>


<script>

  // // Расширение аппки на весь экран

  document.addEventListener('DOMContentLoaded', function() {
    // Расширение веб-приложения Telegram, если доступно
    if (window.Telegram && window.Telegram.WebApp) {
        window.Telegram.WebApp.expand();
        
    }
    
    // var userId = window.Telegram.WebApp.initDataUnsafe.user.id;
    // var textField = document.getElementById('telegramIdField');
    // textField.innerHTML = userId;


    // Получаем товары из БД
    fetch('https://api.baserow.io/api/database/rows/table/287613/?user_field_names=true', {
      method: 'GET',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': 'Token mBWaX1jGTuMGhmfdhq5FdX2JGyz4aYeu'
      }
    })
    .then(response => {
    // Обработка ответа
      return response.json(); // Разрешаем Promise и возвращаем его
    })
    .then(data => {
    console.log(data); // Здесь вы можете использовать данные JSON
    for (i=0 ; i < data.count ; i++ ){
      console.log(data.results[i].type.value);
      
      var currentImg='img'+[i];
      var currentName='name'+[i];
      var currentPrice='price'+[i];

      var img = document.getElementById(currentImg);
      var name = document.getElementById(currentName);
      var price = document.getElementById(currentPrice);
      
      img.src = data.results[i].фото
      name.innerText = data.results[i].название;
      price.innerText = data.results[i].цена + ' р.';
     

    }
    })
    .catch(error => {
    // Обработка ошибки
    });



    
    

  });

function showvegetable(){

fetch('https://api.baserow.io/api/database/rows/table/287613/?user_field_names=true', {
method: 'GET',
headers: {
  'Content-Type': 'application/json',
  'Authorization': 'Token mBWaX1jGTuMGhmfdhq5FdX2JGyz4aYeu'
}
})
.then(response => {
// Обработка ответа
return response.json(); // Разрешаем Promise и возвращаем его
})
.then(data => {
console.log(data); // Здесь вы можете использовать данные JSON
for (i=0 ; i < data.count ; i++ ){

if (data.results[i].type.value=='овощ') {
 
console.log(data.results[i].название);
var currentImg='img'+[i];
var currentName='name'+[i];
var currentPrice='price'+[i];

var img = document.getElementById(currentImg);
var name = document.getElementById(currentName);
var price = document.getElementById(currentPrice);

img.src = data.results[i].фото
name.innerText = data.results[i].название;
price.innerText = data.results[i].цена + ' р.';


} else {
  var currentImg='img'+[i];
var currentName='name'+[i];
var currentPrice='price'+[i];

var img = document.getElementById(currentImg);
var name = document.getElementById(currentName);
var price = document.getElementById(currentPrice);

img.src = '';
name.innerText = '';
price.innerText = '';

}
}})
.catch(error => {
// Обработка ошибки
});

}

function showfruits(){
;
fetch('https://api.baserow.io/api/database/rows/table/287613/?user_field_names=true', {
method: 'GET',
headers: {
  'Content-Type': 'application/json',
  'Authorization': 'Token mBWaX1jGTuMGhmfdhq5FdX2JGyz4aYeu'
}
})
.then(response => {
// Обработка ответа
return response.json(); // Разрешаем Promise и возвращаем его
})
.then(data => {
console.log(data); // Здесь вы можете использовать данные JSON
for (i=0 ; i < data.count ; i++ ){

if (data.results[i].type.value=='фрукт') {
 
console.log(data.results[i].название);
var currentImg='img'+[i];
var currentName='name'+[i];
var currentPrice='price'+[i];

var img = document.getElementById(currentImg);
var name = document.getElementById(currentName);
var price = document.getElementById(currentPrice);

img.src = data.results[i].фото
name.innerText = data.results[i].название;
price.innerText = data.results[i].цена + ' р.';


} else {
  var currentImg='img'+[i];
  var currentName='name'+[i];
  var currentPrice='price'+[i];

var img = document.getElementById(currentImg);
var name = document.getElementById(currentName);
var price = document.getElementById(currentPrice);

img.src = '';
name.innerText = '';
price.innerText = '';

}
}})
.catch(error => {
// Обработка ошибки
});

}


</script>


</html>

