<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document2</title>
  
</head>

<style>
  .line {
    /* border: 1px solid black; */
    display: flex;
    width: 230px;
    height: 230px;
    /* background-color: lightblue; */
    margin:5px;
  }

  .tovar {
    /* border: 1px solid black; */
    width: 150px;
    height: 150px;
    /* background-color: lightsalmon; */
    margin:15px;
    text-align: center;
  }

  .name {
    color:red;
  }

  .img {
    width: 130px;
    height: 130px;
  }

  
</style>

<body>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

<div>
  <button onclick="showvegetable()">овощ</button>
  <button onclick="showfruits()">фрукт</button>
  <button onclick="showall()">показать все</button>
  

</div>


</body>


<script>

  // // Расширение аппки на весь экран

  document.addEventListener('DOMContentLoaded', function() {
    // Расширение веб-приложения Telegram, если доступно
    if (window.Telegram && window.Telegram.WebApp) {
        window.Telegram.WebApp.expand();
        
    }
    
    // var userId = window.Telegram.WebApp.initDataUnsafe.user.id;
    // var textField = document.getElementById('telegramIdField');
    // textField.innerHTML = userId;


    // Получаем товары из БД
    fetch('https://api.baserow.io/api/database/rows/table/287613/?user_field_names=true', {
      method: 'GET',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': 'Token mBWaX1jGTuMGhmfdhq5FdX2JGyz4aYeu'
      }
    })
    .then(response => {
    // Обработка ответа
      return response.json(); // Разрешаем Promise и возвращаем его
    })
    .then(data => {
    
    for (i=0 ; i < data.count ; i=i+2 ){
      
      
    if (i+1 < data.count  )  {
        
      // Создание нового элемента div
    var newLine = document.createElement('div');

    // Присваивание класса новому элементу
    newLine.className = 'line';

    // Добавление нового элемента в DOM
    document.body.appendChild(newLine);

    var newTovar = document.createElement('div');
    newTovar.className = 'tovar';
    newLine.appendChild(newTovar);
    
    var newTovar_img = document.createElement('img');
    newTovar_img.className = 'img';
    newTovar_img.src=data.results[i].фото;
    newTovar.appendChild(newTovar_img); 

    var newTovar_name = document.createElement('div');
    newTovar.appendChild(newTovar_name);
    newTovar_name.innerText = data.results[i].название;

    var newTovar_price = document.createElement('div');
    newTovar.appendChild(newTovar_price);
    newTovar_price.innerText = data.results[i].цена;


// второй товар в столбце
var newTovar = document.createElement('div');
    newTovar.className = 'tovar';
    newLine.appendChild(newTovar);
    
    var newTovar_img = document.createElement('img');
    newTovar_img.className = 'img';
    newTovar_img.src=data.results[i+1].фото;
    newTovar.appendChild(newTovar_img); 

    var newTovar_name = document.createElement('div');
    newTovar.appendChild(newTovar_name);
    newTovar_name.innerText = data.results[i+1].название;

    var newTovar_price = document.createElement('div');
    newTovar.appendChild(newTovar_price);
    newTovar_price.innerText = data.results[i+1].цена;   

    
    } else {
        // Если нечетное количество товаров
         // Создание нового элемента div
    var newLine = document.createElement('div');

// Присваивание класса новому элементу
newLine.className = 'line';

// Добавление нового элемента в DOM
document.body.appendChild(newLine);

var newTovar = document.createElement('div');
newTovar.className = 'tovar';
newLine.appendChild(newTovar);

var newTovar_img = document.createElement('img');
newTovar_img.className = 'img';
newTovar_img.src=data.results[i].фото;
newTovar.appendChild(newTovar_img); 

var newTovar_name = document.createElement('div');
newTovar.appendChild(newTovar_name);
newTovar_name.innerText = data.results[i].название;

var newTovar_price = document.createElement('div');
newTovar.appendChild(newTovar_price);
newTovar_price.innerText = data.results[i].цена;

    }



    }
    })
    .catch(error => {
    // Обработка ошибки
    });



    
    

  });


 function showall(){
    // Обновить страницу
location.reload();

 } 


function showvegetable(){

fetch('https://api.baserow.io/api/database/rows/table/287613/?user_field_names=true', {
method: 'GET',
headers: {
  'Content-Type': 'application/json',
  'Authorization': 'Token mBWaX1jGTuMGhmfdhq5FdX2JGyz4aYeu'
}
})
.then(response => {
// Обработка ответа
return response.json(); // Разрешаем Promise и возвращаем его
})
.then(data => {
// console.log(data); // Здесь вы можете использовать данные JSON
// Удалить все элементы со страницы
const elements = document.querySelectorAll('.line');
elements.forEach(element => element.remove());

for (i=0 ; i < data.count ; i=i+2 ){

if (data.results[i].type.value=='овощ') {

if (i+1 < data.count  )  {
        
        // Создание нового элемента div
      var newLine = document.createElement('div');
  
      // Присваивание класса новому элементу
      newLine.className = 'line';
  
      // Добавление нового элемента в DOM
      document.body.appendChild(newLine);
  
      var newTovar = document.createElement('div');
      newTovar.className = 'tovar';
      newLine.appendChild(newTovar);
      
      var newTovar_img = document.createElement('img');
      newTovar_img.className = 'img';
      newTovar_img.src=data.results[i].фото;
      newTovar.appendChild(newTovar_img); 
  
      var newTovar_name = document.createElement('div');
      newTovar.appendChild(newTovar_name);
      newTovar_name.innerText = data.results[i].название;
  
      var newTovar_price = document.createElement('div');
      newTovar.appendChild(newTovar_price);
      newTovar_price.innerText = data.results[i].цена;
  
  
  // второй товар в столбце
  var newTovar = document.createElement('div');
      newTovar.className = 'tovar';
      newLine.appendChild(newTovar);
      
      var newTovar_img = document.createElement('img');
      newTovar_img.className = 'img';
      newTovar_img.src=data.results[i+1].фото;
      newTovar.appendChild(newTovar_img); 
  
      var newTovar_name = document.createElement('div');
      newTovar.appendChild(newTovar_name);
      newTovar_name.innerText = data.results[i+1].название;
  
      var newTovar_price = document.createElement('div');
      newTovar.appendChild(newTovar_price);
      newTovar_price.innerText = data.results[i+1].цена;   
  
      
      } else {
          // Если нечетное количество товаров
           // Создание нового элемента div
      var newLine = document.createElement('div');
  
  // Присваивание класса новому элементу
  newLine.className = 'line';
  
  // Добавление нового элемента в DOM
  document.body.appendChild(newLine);
  
  var newTovar = document.createElement('div');
  newTovar.className = 'tovar';
  newLine.appendChild(newTovar);
  
  var newTovar_img = document.createElement('img');
  newTovar_img.className = 'img';
  newTovar_img.src=data.results[i].фото;
  newTovar.appendChild(newTovar_img); 
  
  var newTovar_name = document.createElement('div');
  newTovar.appendChild(newTovar_name);
  newTovar_name.innerText = data.results[i].название;
  
  var newTovar_price = document.createElement('div');
  newTovar.appendChild(newTovar_price);
  newTovar_price.innerText = data.results[i].цена;
  
      }
    

} 

}})
.catch(error => {
// Обработка ошибки
});

}

function showfruits(){
    fetch('https://api.baserow.io/api/database/rows/table/287613/?user_field_names=true', {
method: 'GET',
headers: {
  'Content-Type': 'application/json',
  'Authorization': 'Token mBWaX1jGTuMGhmfdhq5FdX2JGyz4aYeu'
}
})
.then(response => {
// Обработка ответа
return response.json(); // Разрешаем Promise и возвращаем его
})
.then(data => {
// console.log(data); // Здесь вы можете использовать данные JSON
// Удалить все элементы со страницы
const elements = document.querySelectorAll('.line');
elements.forEach(element => element.remove());

for (i=0 ; i < data.count ; i=i+2 ){

if (data.results[i].type.value=='фрукт') {

if (i+1 < data.count  )  {
        
        // Создание нового элемента div
      var newLine = document.createElement('div');
  
      // Присваивание класса новому элементу
      newLine.className = 'line';
  
      // Добавление нового элемента в DOM
      document.body.appendChild(newLine);
  
      var newTovar = document.createElement('div');
      newTovar.className = 'tovar';
      newLine.appendChild(newTovar);
      
      var newTovar_img = document.createElement('img');
      newTovar_img.className = 'img';
      newTovar_img.src=data.results[i].фото;
      newTovar.appendChild(newTovar_img); 
  
      var newTovar_name = document.createElement('div');
      newTovar.appendChild(newTovar_name);
      newTovar_name.innerText = data.results[i].название;
  
      var newTovar_price = document.createElement('div');
      newTovar.appendChild(newTovar_price);
      newTovar_price.innerText = data.results[i].цена;
  
  
  // второй товар в столбце
  var newTovar = document.createElement('div');
      newTovar.className = 'tovar';
      newLine.appendChild(newTovar);
      
      var newTovar_img = document.createElement('img');
      newTovar_img.className = 'img';
      newTovar_img.src=data.results[i+1].фото;
      newTovar.appendChild(newTovar_img); 
  
      var newTovar_name = document.createElement('div');
      newTovar.appendChild(newTovar_name);
      newTovar_name.innerText = data.results[i+1].название;
  
      var newTovar_price = document.createElement('div');
      newTovar.appendChild(newTovar_price);
      newTovar_price.innerText = data.results[i+1].цена;   
  
      
      } else {
          // Если нечетное количество товаров
           // Создание нового элемента div
      var newLine = document.createElement('div');
  
  // Присваивание класса новому элементу
  newLine.className = 'line';
  
  // Добавление нового элемента в DOM
  document.body.appendChild(newLine);
  
  var newTovar = document.createElement('div');
  newTovar.className = 'tovar';
  newLine.appendChild(newTovar);
  
  var newTovar_img = document.createElement('img');
  newTovar_img.className = 'img';
  newTovar_img.src=data.results[i].фото;
  newTovar.appendChild(newTovar_img); 
  
  var newTovar_name = document.createElement('div');
  newTovar.appendChild(newTovar_name);
  newTovar_name.innerText = data.results[i].название;
  
  var newTovar_price = document.createElement('div');
  newTovar.appendChild(newTovar_price);
  newTovar_price.innerText = data.results[i].цена;
  
      }
    

} 

}})
.catch(error => {
// Обработка ошибки
});

}


</script>


</html>

